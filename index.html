<div class="calculator-wrapper">
  <div class="header step-2 step-3 hide">
    <p class="header__title">Þú skapar íslenska samfélagið</p>
    <p class="header__lead">Together with its employees, <span id="company-name"></span> creates tax revenues of SEK <span id="total-taxes"></span>. sem að samsvara:</p>
  </div>
  <form class="form step-1">
    <div class="form__elem">
      <label for="company" class="form__elem__label">Nafn á fyrirtæki</label>
      <input type="text" id="company" name="company" class="form__elem__input">
    </div>
    <div class="form__elem">
      <label for="employees" class="form__elem__label">Fjöldi starfsmanna hjá þínu fyrirtæki</label>
      <p class="form__elem__output" id="employees-output"></p>
      <!-- <input type="range" id="employees" name="employees" class="form__elem__range"> -->
      <div id="employees" class="form__elem__range"></div>
    </div>
    <div class="form__elem">
      <label for="salaries" class="form__elem__label">Samtals laun og launatengd gjöld á ári</label>
      <p class="form__elem__output" id="salaries-output"></p>
      <p class="form__elem__output currency">kr.</p>
      <!-- <input type="range" id="salaries" name="salaries" class="form__elem__range"> -->
      <div id="salaries" class="form__elem__range"></div>
    </div>
    <div class="form__elem">
      <label for="tax" class="form__elem__label">Tekjuskattur á ári</label>
      <p class="form__elem__output" id="tax-output"></p>
      <p class="form__elem__output currency">kr.</p>
      <!-- <input type="range" id="tax" name="tax" class="form__elem__range"> -->
      <div id="tax" class="form__elem__range"></div>
    </div>
  </form>

  <div class="total">
    <p class="total__title step-1">Fyrirtækið þitt skapar:</p>
    <div class="total__result-info">
      <div class="total__result-info__block">
        <p class="total__result-info__number" id="totalKindergarden"></p>
        <p class="total__result-info__title">Pláss á leikskóla</p>
      </div>
      <div class="total__result-info__block">
        <p class="total__result-info__number" id="totalPolice"></p>
        <p class="total__result-info__title">Lögregluþjóna</p>
      </div>
      <div class="total__result-info__block">
        <p class="total__result-info__number" id="totalNurse"></p>
        <p class="total__result-info__title">Hjúkrunafræðinga</p>
      </div>
    </div>
  </div>
  <div class="footer">
    <div class="footer__main-text-wrapper step-2 step-3 hide">
      <p class="footer__main-text-wrapper--first">It is important that more people understand <span id="company-name"></span>'s significance for welfare. We all benefit from the fact that things are going well for companies in Sweden.</p>
      <p class="footer__main-text-wrapper--second">Companies, welfare creators, make a difference.</p>
    </div>
    <form action="/" class="footer__form-wrapper step-2 hide">
      <div class="footer__form-elem">
        <label for="email" class="footer__form__label">Fáðu sendar myndir af niðurstöðum til að deila með öðrum</label>
        <input type="email" id="email" name="email" class="footer__form__input" placeholder="Settu inn netfangið þitt">
        <input onclick="nextStep()" type="submit" value="Senda niðurstöður" class="footer__form__submit-button">
      </div>
    </form>
    <div class="footer__success-message step-3 hide">
      <p>Takk fyrir! Þú færð sendann tölvupóst</p>
    </div>
    <div class="footer__buttons">
      <button onclick="nextStep()" class="footer__buttons--next-step">Næsta skref</button>
      <div class="footer__buttons--indicator first-circle active"></div>
      <div class="footer__buttons--indicator second-circle"></div>
    </div>
  </div>
</div>

<div class="mail-wrapper">
  <div class="info-block">
    <div class="info-block__logo">
      <svg width="56" height="57" viewBox="0 0 56 57" fill="none" xmlns="http://www.w3.org/2000/svg">
        <path d="M22.6478 12.0021C22.6478 12.0021 23.3168 13.1543 24.7502 13.1543H31.153C31.153 13.1543 32.5865 13.1543 33.2554 12.0021L35.0711 7.77737C35.0711 7.77737 35.7401 6.62517 35.0711 5.37695L32.5865 1.1522C32.5865 1.1522 31.9175 0 30.4841 0H25.5147C25.5147 0 24.0813 0 23.4123 1.1522L20.9277 5.37695C20.9277 5.37695 20.2587 6.52915 20.9277 7.77737L22.6478 12.0021Z" fill="#B85B24"/>
        <path d="M22.6478 44.2638C22.6478 44.2638 23.3168 43.1116 24.7502 43.1116H31.153C31.153 43.1116 32.5865 43.1116 33.2554 44.2638L35.0711 48.4885C35.0711 48.4885 35.7401 49.6407 35.0711 50.889L32.5865 55.1137C32.5865 55.1137 31.9175 56.2659 30.4841 56.2659H25.5147C25.5147 56.2659 24.0813 56.2659 23.4123 55.1137L20.9277 50.889C20.9277 50.889 20.2587 49.7367 20.9277 48.4885L22.6478 44.2638Z" fill="#B85B24"/>
        <path d="M12.9004 20.5475C12.9004 20.5475 14.2383 20.8356 15.1939 19.8754L19.6854 15.3626C19.6854 15.3626 20.7366 14.3064 20.3544 13.0582L18.7298 8.73742C18.7298 8.73742 18.4431 7.39318 17.1052 7.10513L12.4226 5.85691C12.4226 5.85691 11.0847 5.56886 10.1291 6.52903L6.59321 10.0817C6.59321 10.0817 5.63757 11.0418 5.92426 12.3861L7.07102 17.0909C7.07102 17.0909 7.35772 18.4351 8.69561 18.7232L12.9004 20.5475Z" fill="#B85B24"/>
        <path d="M20.4492 43.3036C20.4492 43.3036 20.7359 41.9594 19.7802 40.9992L15.2887 36.4864C15.2887 36.4864 14.3331 35.4302 12.9952 35.8143L8.69483 37.4466C8.69483 37.4466 7.35694 37.7346 7.07024 39.0789L5.82791 43.8797C5.82791 43.8797 5.54122 45.224 6.49686 46.1842L10.0327 49.7368C10.0327 49.7368 10.9884 50.697 12.3263 50.4089L17.0089 49.2567C17.0089 49.2567 18.3468 48.9686 18.6335 47.6244L20.4492 43.3036Z" fill="#B85B24"/>
        <path d="M44.0545 22.756C44.0545 22.756 42.9077 23.4281 42.9077 24.8684V31.3015C42.9077 31.3015 42.9077 32.7418 44.0545 33.4139L48.2593 35.2382C48.2593 35.2382 49.4061 35.9104 50.6484 35.2382L54.8532 32.7418C54.8532 32.7418 56 32.0697 56 30.6294V25.6365C56 25.6365 56 24.1963 54.8532 23.5242L50.6484 21.0277C50.6484 21.0277 49.5016 20.3556 48.2593 21.0277L44.0545 22.756Z" fill="#B85B24"/>
        <path d="M35.6448 43.3036C35.6448 43.3036 35.3581 41.9594 36.3138 40.9992L40.8053 36.4864C40.8053 36.4864 41.8565 35.4302 43.0988 35.8143L47.3036 37.4466C47.3036 37.4466 48.6415 37.7346 48.9282 39.0789L50.075 43.7837C50.075 43.7837 50.3616 45.128 49.406 46.0881L45.9657 49.7368C45.9657 49.7368 45.0101 50.697 43.6722 50.4089L38.9895 49.2567C38.9895 49.2567 37.6516 48.9686 37.365 47.6244L35.6448 43.3036Z" fill="#B85B24"/>
        <path d="M43.0992 20.5475C43.0992 20.5475 41.7613 20.8356 40.8057 19.8754L36.3142 15.3626C36.3142 15.3626 35.263 14.3064 35.6452 13.0582L37.2698 8.73742C37.2698 8.73742 37.5565 7.39318 38.8944 7.10513L43.6726 5.85691C43.6726 5.85691 45.0105 5.56886 45.9661 6.52903L49.502 10.0817C49.502 10.0817 50.4576 11.0418 50.1709 12.3861L49.0242 17.0909C49.0242 17.0909 48.7375 18.4351 47.3996 18.7232L43.0992 20.5475Z" fill="#B85B24"/>
        <path d="M11.9455 22.756C11.9455 22.756 13.0922 23.4281 13.0922 24.8684V31.3015C13.0922 31.3015 13.0922 32.7418 11.9455 33.4139L7.74067 35.2382C7.74067 35.2382 6.5939 35.9104 5.35157 35.2382L1.14677 32.7418C1.14677 32.7418 0 32.0697 0 30.6294V25.6365C0 25.6365 0 24.1963 1.14677 23.5242L5.35157 21.0277C5.35157 21.0277 6.49834 20.3556 7.74067 21.0277L11.9455 22.756Z" fill="#B85B24"/>
      </svg>
    </div>
    <div class="info-block__title">
      Við sköpum íslenskt samfélag
    </div>
    <div class="info-block__lead-text">
      Samanlagt með starfsmönnum <span id="company-name"></span> höfum við borgað <span id="total-taxes"></span> í skatta sem samsvara:
    </div>
    <div class="info-block__result-info">
      <p class="info-block__result-info__number" id="totalKindergarden">35</p>
      <p class="info-block__result-info__title">Pláss á leikskóla</p>
    </div>
  </div>
  <div class="photo-block">
    <img class="photo-block__image-1" src="https://i.postimg.cc/c1DXjQ92/image-1.jpg" alt="image-1"/>
    <img class="photo-block__image-2" src="https://i.postimg.cc/qMSQBpdG/image-2.jpg" alt="image-2"/>
    <img class="photo-block__image-3" src="https://i.postimg.cc/hPfpqfNj/image-3.jpg" alt="image-3"/>
  </div>
</div>

<link rel="stylesheet" type="text/css" href="./nouislider.css">
<style>
  .calculator-wrapper {
    background-color: #fff;
    display: flex;
    flex-direction: column;
    width: 664px;
  }
  .header {
    padding: 64px 47px 0;
  }
  .header__title {
    font-family: Blacker Display;
    font-style: normal;
    font-weight: 500;
    font-size: 45px;
    line-height: 125.5%;
    color: #0C120C;
    margin: 0;
    margin-bottom: 25px;
  }
  .header__lead {
    font-family: Circular Std;
    font-style: normal;
    font-weight: normal;
    font-size: 16px;
    line-height: 170%;
    color: #0C120C;
    margin-top: 25px;
    margin: 0;
  }
  .form {
    margin: 42px 47px 0 47px;
    padding-bottom: 53px;
    flex-direction: column;
  }
  .form::after {
    content: '';
    height: 2px;
    background-color:#EEECE7;
    position: absolute;
    left: 0;
    width: 100vw;
    margin-top: 53px;
  }
  .form__elem {
    display: flex;
    margin-bottom: 49px;
    flex-wrap: wrap;
    justify-content: space-between;
  }
  .form__elem:last-child {
    margin-bottom: 0;
  }
  .form__elem__label {
    display: flex;
    align-items: center;
    margin-bottom: 28px;
    margin-right: auto; 
    font-family: Circular Std;
    font-style: normal;
    font-weight: bold;
    font-size: 16px;
    line-height: 170%;
    color: #08262A;
  }
  .form__elem__input {
    border: 1px solid #EEECE7;
    box-sizing: border-box;
    height: 58px;
    width: 100%;
    padding-left: 16px;
    font-size: 16px;
    font-family: Circular Std;
    font-style: normal;
  }
  .form__elem__input::placeholder {
    color: #999;
    opacity: 1;
  }
  .form__elem__range {
    width: 100%;
    background: #EEECE7;
    height: 3px;
    -webkit-transition: .2s;
    transition: opacity .2s;
  }
  .form__elem__output {
    display: flex;
    align-items: center;
    margin: 0;
    font-family: Blacker Display;
    font-style: normal;
    font-weight: 800;
    font-size: 25px;
    line-height: 170%;
    color: #B85B24;
  }
  .form__elem__output.currency {
    margin-left: 6px;
  }
  .total {
    padding: 0 47px 45px 47px;
    display: flex;
    flex-direction: column;
    margin-top: 33px;
  }
  .total__title {
    font-family: Circular Std;
    font-style: normal;
    font-weight: bold;
    font-size: 18px;
    line-height: 170%;
    color: #08262A;
    margin: 0;
    margin-bottom: 27px;
  }
  .total__result-info {
    width: 100%;
    display: flex;
    justify-content: space-between;
    margin-bottom: 43px;
  }
  .total__result-info__block {
    border: 1px solid #EEECE7;
    box-sizing: border-box;
    width: 181px;
    height: 145px;
    justify-content: center;
    display: flex;
    flex-direction: column;
  }
  .total__result-info__number {
    font-family: Circular Std;
    font-style: normal;
    font-weight: 500;
    font-size: 60px;
    line-height: 99%;
    text-align: center;
    color: #08262A;
    margin: 0;
    margin-bottom: 10px;
  }
  .total__result-info__title {
    font-family: Circular Std;
    font-style: normal;
    font-weight: bold;
    font-size: 16px;
    line-height: 170%;
    text-align: center;
    color: #B85B24;
    margin: 0;
  }
  .footer {
    margin: 0 47px 42px;
    position: relative;
  }
  .footer__buttons {
    display: flex;
    align-items: center;
    margin-bottom: 18px;
  }
  .footer__buttons--next-step {
    margin-right: auto;
    width: 200px;
    height: 50px;
    background: #B85B24;
    font-family: Circular Std;
    font-style: normal;
    font-weight: bold;
    font-size: 16px;
    line-height: 20px;
    text-align: center;
    color: #FFFFFF;
    border: 0;
    cursor: pointer;
  }
  .footer__buttons--indicator {
    border-radius: 50%;
    background: #F3F3F3;
    width: 10px;
    height: 10px;
    margin-left: 9px;
  }
  .footer__buttons--indicator.first-circle {
    margin-left: auto;
  }
  .footer__buttons--indicator.active {
    background: #264C51;
  }
  .footer__main-text-wrapper {
    margin-bottom: 60px;
  }
  .footer__main-text-wrapper--first,
  .footer__main-text-wrapper--second {
    font-family: Circular Std;
    font-style: normal;
    font-weight: normal;
    font-size: 16px;
    line-height: 170%;
    color: #0C120C;
    margin: 0;
  }
  .footer__main-text-wrapper--second {
    margin: 0;
    margin-top: 25px;
  }
  .footer__form-elem {
    display: flex;
    flex-direction: column;
  }
  .footer__form__label {
    font-family: Circular Std;
    font-style: normal;
    font-weight: bold;
    font-size: 16px;
    line-height: 170%;
    color: #08262A;
  }
  .footer__form__input {
    margin-top: 23px;
    border: 1px solid #EEECE7;
    box-sizing: border-box;
    height: 58px;
    padding-left: 16px;
    margin-bottom: 70px;
  }
  .footer__form__input::placeholder {
    color: #999;
    opacity: 1;
  }
  .footer__form__submit-button {
    position: absolute;
    bottom: 0;
    margin-right: auto;
    width: 200px;
    height: 50px;
    background: #B85B24;
    font-family: Circular Std;
    font-style: normal;
    font-weight: bold;
    font-size: 16px;
    line-height: 20px;
    text-align: center;
    color: #FFFFFF;
    border: 0;
    cursor: pointer;
  }
  .footer__success-message {
    padding-top: 50px;
    padding-bottom: 80px;
    font-family: Circular Std;
    font-style: normal;
    font-weight: bold;
    font-size: 16px;
    line-height: 170%;
    color: #08262A;
  }
  .hide {
    display: none;
  }
  #company-name {
    font-weight: 700;
  }
  .noUi-touch-area {
    width: 19px;
    height: 19px;
    background: #08262A;
    border-radius: 50%;
  }  
  @media only screen and (max-width: 663px) {
    .calculator-wrapper {
      width: 100%;
      min-width: auto;
    }
    .header {
      padding: 41px 20px 0;
    }
    .header__title {
      font-size: 30px;
      margin-bottom: 34px;
    }
    .form {
      margin: 42px 20px 0 20px;
    }
    .form__elem {
      margin-bottom: 41px;
    }
    .form__elem__label {
      max-width: 152px;
      width: 100%;
      font-size: 15px;
    }
    .form__elem__output {
      font-size: 22px;
      margin-bottom: 28px;
    }
    .total {
      padding: 0 20px;
    }
    .total__result-info {
      flex-wrap: wrap;
      margin-bottom: 15px;
    }
    .total__result-info__block {
      height: 71px;
      flex-direction: row;
      width: 100%;
      align-items: center;
      justify-content: space-around;
      margin-bottom: 7px;
    }
    .total__result-info__number {
      margin-bottom: 0;
    }
    .footer {
      margin: 0 20px 42px;
    }
    .footer__main-text-wrapper {
      margin-top: 27px;
    }
    .footer__buttons {
      flex-wrap: wrap;
      margin: 0;
    }
    .footer__buttons--next-step {
      width: 100%;
      order: 0;
      margin-top: 15px;
    }
    .footer__buttons--indicator.first-circle {
      order: -2
    }
    .footer__buttons--indicator.second-circle {
      order: -1;
      margin-right: auto;
    }
    .footer__form__input {
      margin-bottom: 86px;
    }
    .footer__form__submit-button {
      width: 100%;
    }
    .footer__buttons.step-2 {
      position: absolute;
      bottom: 65;
      left: 50%;
      transform: translateX(-50%);
    }
  }
  .mail-wrapper {
    display: flex;
    position: relative;
    padding-bottom: 63px;
    max-width: 1200px;
    max-height: 630px;
    background-color: #EEECE7;
  }
  .info-block {
    margin-left: 52px;
    margin-top: 59px;
    min-width: 520px;
  }
  .info-block__logo {
    width: 56px;
    height: 56px;
    margin-bottom: 47px;
  }
  .info-block__title {
    font-family: Blacker Display;
    font-style: normal;
    font-weight: 500;
    font-size: 65.5046px;
    line-height: 125.5%;
    color: #0C120C;
    max-width: 547px;
  }
  .info-block__lead-text {
    font-family: Circular Std;
    font-style: normal;
    font-weight: normal;
    font-size: 16px;
    line-height: 170%;
    color: #0C120C;
    margin-bottom: 40px;
  }
  .info-block__result-info {
    border: 1px solid #CED0CE;
    box-sizing: border-box;
    width: 181px;
    height: 145px;
    justify-content: center;
    display: flex;
    flex-direction: column;
    margin-bottom: 51px;
  }
  .info-block__result-info__number {
    font-family: Circular Std;
    font-style: normal;
    font-weight: 500;
    font-size: 60px;
    line-height: 99%;
    text-align: center;
    color: #08262A;
    margin: 0;
    margin-bottom: 0px;
    margin-bottom: 10px;
  }
  .info-block__result-info__title {
    font-family: Circular Std;
    font-style: normal;
    font-weight: bold;
    font-size: 16px;
    line-height: 170%;
    text-align: center;
    color: #B85B24;
    margin: 0;
  }
  .photo-block {
    margin-top: 25px;
    margin-right: 60px;
    position: relative;
    width: 100%;
    margin-left: 20px;
  }
  .photo-block__image-1 {
    top: 97px;
    display: block;
    z-index: 2;
    left: 27px;
    position: absolute;
    width: 306px;
    height: 414px;
  }
  .photo-block__image-2 {
    top: 0;
    right: 0;
    z-index: 1;
    position: absolute;
    width: 282px;
    height: 349px;
  }
  .photo-block__image-3 {
    bottom: 22px;
    right: 0;
    z-index: 3;
    position: absolute;
    width: 282px;
    height: 173px;
  }
</style>

<script src="./nouislider.js"></script> 
<script>
  // Functionality for steps
  var step1Elements = document.getElementsByClassName('step-1');
  var step2Elements = document.getElementsByClassName('step-2');
  var step3Elements = document.getElementsByClassName('step-3');

  var totalTaxes = null;

  var nextButton = document.querySelector('.footer__buttons--next-step');
  var stepIndicators = document.getElementsByClassName('footer__buttons--indicator');
  var footerButtons = document.querySelector('.footer__buttons');

  var step = 1;

  function nextStep(stepIndicatorValue) {
    if (step === 1) {
      for (var elem of step2Elements) {
        elem.classList.remove('hide');
      }
      for (var elem of step1Elements) {
        elem.classList.add('hide');
      }
      nextButton.classList.add('hide');

      stepIndicators[0].classList.remove('active');
      stepIndicators[1].classList.add('active');
      footerButtons.classList.add('step-2');
      document.querySelector('.total__result-info').style.marginBottom = 0;
      document.querySelectorAll('#company-name').forEach(elem => elem.innerHTML = document.querySelector('#company').value);
      document.querySelector('#total-taxes').innerHTML = totalTaxes.toLocaleString('en-EN');

      step = 2;
    } else if (step === 2) {
      for (var elem of step2Elements) {
        elem.classList.add('hide');
      }
      for (var elem of step3Elements) {
        elem.classList.remove('hide');
      }
    }
  }

  // Functionality for sliders
  var lockedState = true;
  var lockedSlider = false;

  var costBabyInKindergardenYear = 2289258;
  var costPoliceOfficierYear = 12427622;
  var costNurseYear = 12923192;

  var slider1 = document.getElementById('employees');
  var slider2 = document.getElementById('salaries');
  var slider3 = document.getElementById('tax');

  var slider1Value = document.getElementById('employees-output');
  var slider2Value = document.getElementById('salaries-output');
  var slider3Value = document.getElementById('tax-output');

  function crossUpdate(value, slider) {
    if (slider3 === slider) {
      slider3.noUiSlider.set((value * 450958.8).toFixed(2));
    }
  }

  function updateTotalValues() {
    totalTaxes = Number(slider2Value.innerText) * 0.33 + Number(slider3Value.innerText);
    var totalKindergarden = totalTaxes / costBabyInKindergardenYear;
    var totalPolice = totalTaxes / costPoliceOfficierYear;
    var totalNurse = totalTaxes / costNurseYear;
    // Set total cost of having a baby at the kindegarden for a year
    document.getElementById('totalKindergarden').innerHTML = Math.floor(totalKindergarden * 10) / 10;
    // Set total cost of having a police officier for a year
    document.getElementById('totalPolice').innerHTML = Math.floor(totalPolice * 10) / 10;
    // Set total cost of having a nurse for a year
    document.getElementById('totalNurse').innerHTML = Math.floor(totalNurse * 10) / 10;
  }

  noUiSlider.create(slider1, {
    start: 12,
    step: 1,
    connect: [true, false],
    animate: false,
    range: {
      min: 1,
      max: 399
    },
  });
  noUiSlider.create(slider2, {
    start: 80000000,
    animate: false,
    connect: [true, false],
    range: {
      min: 100000,
      max: 150000000
    }
  });
  noUiSlider.create(slider3, {
    start: 5411506,
    animate: false,
    connect: [true, false],
    range: {
      min: 10000,
      max: 67162000
    }
  });

  slider1.noUiSlider.on('update', function (values, handle) {
    slider1Value.innerHTML = Math.trunc(values[handle]);
  });

  slider2.noUiSlider.on('update', function (values, handle) {
    slider2Value.innerHTML = values[handle];
  });

  slider3.noUiSlider.on('update', function (values, handle) {
    slider3Value.innerHTML = values[handle];
  });

  slider1.noUiSlider.on('slide', function (values, handle) {
    crossUpdate(values[handle], slider3);
  });

  slider2.noUiSlider.on('update', updateTotalValues);
  slider3.noUiSlider.on('update', updateTotalValues);

</script>